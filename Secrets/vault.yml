---

hosts: vm

tasks:
  - name: Embed the secure password file
    template:
      src: /templates/password_file.j2
      dest: /tmp/password_file
      mode: 0600
  tags:
    - create

tasks:
  - name: Delete the secure pasword file
  file:
    name: /tmp/password_file
    state: absent
  tags:
    - destroy


tasks: 
  - name: Debug the encrypted password
    debug:
      msg: "The actual password is {{password}}"
    tags:
      - create
      - destroy